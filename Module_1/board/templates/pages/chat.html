{% extends 'base.html' %}

{% block title %}Chat with Kyle's Assistant{% endblock title %}

{% block page_title %}Chat with My Assistant{% endblock page_title %}

{% block content %}
<div class="chat-container">
    <div class="chat-description">
        <p>
            Feel free to ask me questions about Kyle's background, skills, projects, or request to see his resume!
        </p>
    </div>
    
    <div class="chat-window">
        <div class="chat-messages">
            {% if not messages %}
                <div class="message assistant">
                    <div class="message-content">
                        Hello! I'm Kyle's assistant. How can I help you today?
                    </div>
                </div>
            {% else %}
                {% for message in messages %}
                    <div class="message {{ message.role }}">
                        <div class="message-content">
                            {{ message.content }}
                        </div>
                    </div>
                {% endfor %}
                
                {% if processing %}
                    <div class="message assistant processing">
                        <div class="message-content">
                            <div class="typing-indicator"><span></span><span></span><span></span></div>
                        </div>
                    </div>
                {% endif %}
            {% endif %}
            
            {% if error %}
                <div class="message system error">
                    <div class="message-content">
                        {{ error }}
                    </div>
                </div>
            {% endif %}
        </div>
        
        <div class="chat-input-area">
            <form method="POST" action="{{ url_for('pages.chat') }}">
                <textarea name="user_message" 
                          placeholder="Type your message here..." 
                          maxlength="500"
                          rows="2"
                          required></textarea>
                <div class="chat-buttons">
                    <button type="submit" name="action" value="reset" title="Reset conversation">
                        <span>Reset</span>
                    </button>
                    <button type="submit" name="action" value="send" title="Send message">
                        <span>Send</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <div class="chat-suggestions">
        <p>Try asking:</p>
        <ul>
            <li>
                <form method="POST" action="{{ url_for('pages.chat') }}" class="suggestion-form">
                    <input type="hidden" name="user_message" value="What projects has Kyle worked on?">
                    <input type="hidden" name="action" value="send">
                    <button type="submit" class="suggestion-button">What projects has Kyle worked on?</button>
                </form>
            </li>
            <li>
                <form method="POST" action="{{ url_for('pages.chat') }}" class="suggestion-form">
                    <input type="hidden" name="user_message" value="Can I see Kyle's resume?">
                    <input type="hidden" name="action" value="send">
                    <button type="submit" class="suggestion-button">Can I see Kyle's resume?</button>
                </form>
            </li>
            <li>
                <form method="POST" action="{{ url_for('pages.chat') }}" class="suggestion-form">
                    <input type="hidden" name="user_message" value="What are Kyle's technical skills?">
                    <input type="hidden" name="action" value="send">
                    <button type="submit" class="suggestion-button">What are Kyle's technical skills?</button>
                </form>
            </li>
        </ul>
    </div>
    
    {% if show_resume %}
    <div class="resume-section">
        <h3>Kyle's Resume</h3>
        <div class="resume-content">
            <!-- You can put your actual resume content here -->
            <h4>Education</h4>
            <p>Johns Hopkins University - MS in Computer Science</p>
            
            <h4>Experience</h4>
            <p>MLOps Engineer - Current Company</p>
            <p>Previous relevant positions...</p>
            
            <h4>Skills</h4>
            <p>Python, Machine Learning, Flask, OpenAI, etc.</p>
            
            <div class="resume-download">
                <a href="{{ url_for('static', filename='resume.pdf') }}" class="download-button">Download PDF Resume</a>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock content %}